config:
  endpoint_under_test:
    kind: echo
  default_request:
    chat_uuid: '0xdead'

steps:
  - 'Write success in the response'
  - name: Send hello
    request:
      message: 'Hello!'
      chat_uuid: '{{ chat_uuid }}'
  - name: Send hello
    request:
      message: 'Hello!'
      chat_uuid: '0x11'
    asserts:
      - eval: 'True == True'
      - eval: 'response.message == "Hello!"'
        result: False
      - 'response.chat_uuid == "0x11"'

  - name: Send previous received chat_uuid
    request:
      message: 'Here is previous chat_uuid'
      chat_uuid:
        eval: 'last_response.chat_uuid'
    # asserts:
    #   - eval: 'response.chat_uuid == "0x11"'

variables:
  chat_uuid: '0x00'
